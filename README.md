
---

# Shot Boundary Detection in Soccer

## Abstract

The production of multimedia videos has surged due to affordable video equipment, large-capacity storage devices, and user-friendly editing tools. As video content proliferates, efficient video analysis has become increasingly critical for reducing production costs and manual labor. A fundamental step in video analysis is shot boundary detection (SBD), which segments videos into discrete units called *shots*. However, detecting shot boundaries remains challenging due to the diversity of transition types and domain-specific variations.

This study compares popular SBD algorithms within the soccer domain and reveals several important insights. Pixel-based approaches outperform histogram-based methods in terms of precision, while deep learning models such as TransNetV2 struggle with certain transitions, particularly logo transitions. Based on these findings, we propose a hybrid algorithm that combines pixel-based and deep learning approaches to improve performance. The proposed method achieves significant improvements, with an average F1 score of **0.94** on the La Liga tournament and **0.88** across five other European tournaments.

**Key contributions include:**

* A specialized soccer SBD dataset
* A comprehensive comparison of widely used SBD algorithms
* A hybrid SBD algorithm tailored for soccer broadcast videos

---

## Dataset Description

### `dataset/`

Contains **full-length soccer match broadcasts** (download from SoccerNet)

```
dataset/
   match_x/
      1.mp4
      2.mp4
      labels.json
```

The annotation timestamps are used to automatically extract **goal-centered clips**.

---

### `Ground Truth/annotation.csv`

Contains manually labeled shot boundaries (frame numbers).

Used for:

* parameter optimization
* quantitative evaluation

---

## Repository Structure

```
Shot-Boundary-Detection/

â”œâ”€â”€ dataset/                            # Original SoccerNet match dataset
â”‚                                       # Each subfolder contains a full match and annotations
â”‚                                       # Used as source input to generate goal clips

â”œâ”€â”€ Ground Truth/                       
â”‚   â””â”€â”€ annotation.csv                  # Manually annotated shot boundaries (frame indices)
â”‚                                       # Used for evaluating all detection algorithms

â”œâ”€â”€ output_adaptive_detector/           # Results generated by AdaptiveDetector
â”œâ”€â”€ output_ffmpeg/                      # Frame extraction output (images + timestamps)
â”œâ”€â”€ output_fusion/                      # Final hybrid method results
â”œâ”€â”€ output_histogram_detector/          # HistogramDetector detection results
â”œâ”€â”€ output_transnet_v2/                 # Deep learning detection results

â”œâ”€â”€ transnetv2-weights/                 # Pretrained model weights required for TransNetV2 inference

â”œâ”€â”€ .gitattributes                      # Git configuration
â”œâ”€â”€ __init__.py                         # Enables local Python package import

â”œâ”€â”€ 01_frame_extraction.py              # Extracts all frames for manual labeling
â”œâ”€â”€ 01_goal_clip_extraction.py          # Converts matches â†’ goal-centered clips
â”œâ”€â”€ 02_transnet_v2.py                   # Deep learning shot boundary detection
â”œâ”€â”€ 03_adaptive_detector.py             # Pixel-based detection (AdaptiveDetector)
â”œâ”€â”€ 03_histogram_detector.py            # Histogram-based detection

â”œâ”€â”€ 03_grid_search_parameter_histogram_detector.py      # Histogram parameter search
â”œâ”€â”€ 03_grid_search_parameters_adaptive_detector.py      # Adaptive parameter search

â”œâ”€â”€ 03_grid_search_parameters_adaptive_detector.sbatch  # SLURM adaptive grid search
â”œâ”€â”€ 03_grid_search_parameters_histogtam_detector.sbatch # SLURM histogram grid search

â”œâ”€â”€ 03_statistical_analysis_adaptive_detector.ipynb     # Adaptive detector plots
â”œâ”€â”€ 03_statistical_analysis_histogram_detector.ipynb    # Histogram detector plots

â”œâ”€â”€ 04_fusion.py                        # Hybrid fusion algorithm

â”œâ”€â”€ requirements.txt                    # Python dependencies
â”œâ”€â”€ transnetv2.py                       # TransNetV2 inference wrapper
â””â”€â”€ README.md
```

---

## Installation

### 1. Clone Repository

```bash
git clone https://github.com/yasin0205/Shot-Boundary-Detection.git
cd Shot-Boundary-Detection
```

---

### 2. Download TransNetV2 Weights

Download:
[https://github.com/soCzech/TransNetV2/tree/master/inference/transnetv2-weights](https://github.com/soCzech/TransNetV2/tree/master/inference/transnetv2-weights)

Place inside:

```
transnetv2-weights/
```

---

### 3. Install Dependencies

```bash
pip install -r requirements.txt
```

**Tested on Python 3.7 (Windows).**

---

## Pipeline Execution (Run in Order)

### Step 1 â€” Generate Goal Clips

Creates experiment dataset.

```bash
python 01_goal_clip_extraction.py
```

Output:

```
dataset/00_goalcut/*.mp4
```

---

### Step 2 â€” (Optional) Frame Extraction

Used only to recreate manual annotations.

```bash
python 01_frame_extraction.py
```

Output:

```
output_ffmpeg/
```

---

### Step 3 â€” Deep Learning Detection (TransNetV2)

```bash
python 02_transnet_v2.py
```

Output:

```
output_transnet_v2/summary_transnet_v2.csv
```

---

### Step 4 â€” Classical Detection

#### Adaptive Detector

```bash
python 03_adaptive_detector.py
```

Output:

```
output_adaptive_detector/summary_adaptive_detector.csv
```

#### Histogram Detector

```bash
python 03_histogram_detector.py
```

Output:

```
output_histogram_detector/summary_histogram_detector.csv
```

---

### Step 5 â€” Fusion (Proposed Method)

```bash
python 04_fusion.py
```

Output:

```
output_fusion/summary_fusion.csv
```

---

## Optional: Parameter Optimization

```bash
python 03_grid_search_parameters_adaptive_detector.py
python 03_grid_search_parameters_histogram_detector.py
```

SLURM cluster execution available via `.sbatch` files.

---

## Final Outputs

| File                           | Description           |
| ------------------------------ | --------------------- |
| summary_transnet_v2.csv        | Deep learning results |
| summary_adaptive_detector.csv  | Pixel-based results   |
| summary_histogram_detector.csv | Histogram results     |
| summary_fusion.csv             | Final hybrid results  |

---

## Thesis Reference

**Mohammad Azizul Islam Yasin â€” Shot Boundary Detection in Soccer**
Oslo Metropolitan University, 2024

[https://home.simula.no/~paalh/students/2024-OsloMet-MohammadAzizulYasin](https://home.simula.no/~paalh/students/2024-OsloMet-MohammadAzizulYasin)

---

## Contact

**Mohammad Azizul Islam Yasin**
ðŸ“§ [azizulislamyasin@gmail.com](mailto:azizulislamyasin@gmail.com)

---

